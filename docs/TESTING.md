# 🧪 完整功能测试指南

## 📋 测试前准备

### 1. 启动后端服务

```bash
# 打开终端1
cd /Users/gavin/driving-quiz-app/backend
go run main.go
```

**预期输出**：
```
🚀 Starting DriveQuiz Backend Server...
✅ Server is ready at http://localhost:8080
📚 Available endpoints:
   - GET  /api/health
   - GET  /api/banks
   - GET  /api/banks/:id/download
```

### 2. 安装前端依赖（首次运行）

```bash
# 打开终端2
cd /Users/gavin/driving-quiz-app/mobile

# 安装依赖
flutter pub get

# 运行代码生成（如果之前没运行过）
flutter pub run build_runner build --delete-conflicting-outputs
```

### 3. 运行前端应用

```bash
# 在mobile目录下
flutter run
```

**选择设备**：
- 如果有多个设备，选择一个（推荐模拟器）
- 等待应用启动

---

## 🎯 完整测试流程

### 阶段1：首次启动（2-3分钟）

#### 场景1.1：查看题库列表页
- [ ] 应用启动后，看到底部导航栏（题库/统计/设置）
- [ ] 当前在「题库」Tab
- [ ] 顶部显示统计卡片（初始数据全0）
- [ ] 看到两个Tab：「我的题库」和「题库商店」

**预期界面**：
```
┌─────────────────────────────────┐
│ 驾考刷刷           🔄  ⚙️      │
├─────────────────────────────────┤
│ 📊 统计卡片（渐变蓝色）          │
│ 题库: 0  总题数: 0               │
│ 已答: 0  正确率: 0%              │
├─────────────────────────────────┤
│ 我的题库 | 题库商店 ←选中        │
├─────────────────────────────────┤
│ （空状态）                       │
│ 📦 还没有题库                   │
│ 去「题库商店」下载题库...        │
└─────────────────────────────────┘
│ 📚 题库  📊 统计  ⚙️ 设置      │
└─────────────────────────────────┘
```

#### 场景1.2：切换到题库商店
- [ ] 点击「题库商店」Tab
- [ ] 看到加载中指示器
- [ ] 加载完成后，看到2个可下载题库：
  - 示例题库（50题）
  - 中国驾照科目一（10题）

**预期界面**：
```
┌─────────────────────────────────┐
│ 我的题库 | 题库商店 ←选中        │
├─────────────────────────────────┤
│ ┌─────────────────────────────┐ │
│ │ 📥 示例题库                  │ │
│ │ 50题 | 简体中文              │ │
│ │ 版本 1.0.0                   │ │
│ │ [下载题库] 按钮               │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 📥 中国驾照科目一             │ │
│ │ 10题 | 简体中文              │ │
│ │ 版本 1.0.0                   │ │
│ │ [下载题库] 按钮               │ │
│ └─────────────────────────────┘ │
└─────────────────────────────────┘
```

---

### 阶段2：下载题库（1-2分钟）

#### 场景2.1：下载示例题库
- [ ] 点击「示例题库」的「下载题库」按钮
- [ ] 看到下载进度条（0% → 100%）
- [ ] 下载完成后，按钮变为「✓ 已下载」（绿色）
- [ ] 顶部显示绿色提示：「示例题库 下载成功！」

**测试要点**：
- 进度条是否平滑增长
- 按钮状态是否正确变化
- 提示信息是否显示

#### 场景2.2：切换回我的题库
- [ ] 点击「我的题库」Tab
- [ ] 看到已下载的题库卡片
- [ ] 卡片显示：
  - 📚 图标
  - 题库名称
  - 50题
  - 进度条（初始0%）
  - 统计数据（已答: 0/50）
  - 🗑️ 删除按钮
  - 「开始刷题」按钮

**预期界面**：
```
┌─────────────────────────────────┐
│ 我的题库 ←选中 | 题库商店        │
├─────────────────────────────────┤
│ ┌─────────────────────────────┐ │
│ │ 📚 示例题库        🗑️       │ │
│ │ 50题                         │ │
│ │ ━━━━━━━━━━━ 0%               │ │
│ │ ✓ 已答: 0/50  ↗ 正确率: -   │ │
│ │ ❌ 错题: 0    ⭐ 收藏: 0     │ │
│ │ [▶️ 开始刷题]                │ │
│ └─────────────────────────────┘ │
└─────────────────────────────────┘
```

#### 场景2.3：检查统计卡片更新
- [ ] 顶部统计卡片数据更新：
  - 题库: 1
  - 总题数: 50
  - 已答: 0
  - 正确率: 0%

---

### 阶段3：刷题功能（5-10分钟）

#### 场景3.1：进入刷题页面
- [ ] 点击「开始刷题」按钮
- [ ] 页面跳转到刷题页面
- [ ] 顶部显示题库名称
- [ ] 看到进度条：1/50
- [ ] 看到第一题的内容

**预期界面**：
```
┌─────────────────────────────────┐
│ ← 示例题库              🔲      │
├─────────────────────────────────┤
│ 进度: 1/50      已答: 0          │
│ ━━━━━━━━━━━━━━━━━━━━━━━        │
├─────────────────────────────────┤
│ [单选题]  第1题            ⭐    │
│                                  │
│ ┌─────────────────────────────┐ │
│ │ 题目内容...                  │ │
│ └─────────────────────────────┘ │
│                                  │
│ ⭕ A. 选项A                     │
│ ⭕ B. 选项B                     │
│ ⭕ C. 选项C                     │
│ ⭕ D. 选项D                     │
│                                  │
└─────────────────────────────────┘
│ [← 上一题]  👁️  [下一题 →]    │
└─────────────────────────────────┘
```

#### 场景3.2：答题流程
1. **选择答案**
   - [ ] 点击一个选项（如A）
   - [ ] 选项高亮显示（蓝色边框）
   - [ ] 出现「提交答案」按钮

2. **提交答案**
   - [ ] 点击「提交答案」按钮
   - [ ] 看到答案反馈：
     - ✅ 绿色（正确）或 ❌ 红色（错误）
   - [ ] 正确答案高亮显示
   - [ ] 如果错误，你的答案标红
   - [ ] 显示答案解析卡片

**答案解析卡片**：
```
┌─────────────────────────────────┐
│ ✅ 回答正确！                    │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ ✓ 正确答案: A                   │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ 💡 解析                          │
│ 详细的答案解析说明...            │
└─────────────────────────────────┘
```

3. **导航功能**
   - [ ] 点击「下一题」→ 跳转到第2题
   - [ ] 或左滑屏幕 → 也跳转到第2题
   - [ ] 点击「上一题」→ 返回第1题
   - [ ] 或右滑屏幕 →  也返回第1题

4. **收藏功能**
   - [ ] 点击右上角星标 ⭐
   - [ ] 星标变成实心黄色 ⭐（已收藏）
   - [ ] 再次点击 → 取消收藏

5. **显示/隐藏答案**
   - [ ] 已答题后，点击眼睛图标 👁️
   - [ ] 答案解析隐藏
   - [ ] 再次点击 → 答案解析显示

#### 场景3.3：使用答题卡
- [ ] 点击右上角网格图标 🔲
- [ ] 侧边抽屉滑出
- [ ] 看到答题卡界面：
  - 统计信息（总题数/已答/未答）
  - 图例（当前/已答/未答）
  - 题号网格（5x10）

**答题卡界面**：
```
┌─────────────────────────────────┐
│ 🔲 答题卡                 ✕    │
├─────────────────────────────────┤
│ 总题数: 50                       │
│ 已答: 3    未答: 47              │
├─────────────────────────────────┤
│ 🔵 当前  🟢 已答  ⬜ 未答       │
├─────────────────────────────────┤
│ 🔵1  🟢2  🟢3  ⬜4  ⬜5       │
│ ⬜6  ⬜7  ⬜8  ⬜9  ⬜10      │
│ ... (继续到50)                   │
└─────────────────────────────────┘
```

**测试要点**：
- [ ] 点击任意题号 → 跳转到该题
- [ ] 抽屉自动关闭

#### 场景3.4：退出刷题
- [ ] 点击左上角返回按钮 ←
- [ ] 看到退出确认对话框：
  ```
  退出刷题
  ─────────
  确定要退出吗？当前进度会保存。
  
  [继续刷题]  [退出]
  ```
- [ ] 点击「退出」
- [ ] 返回题库列表页

---

### 阶段4：统计页面（3-5分钟）

#### 场景4.1：查看统计页面
- [ ] 点击底部「统计」Tab
- [ ] 看到统计页面

**预期界面**：
```
┌─────────────────────────────────┐
│ 学习统计                  🔄    │
├─────────────────────────────────┤
│ ┌───────────────────────────┐   │
│ │ 🏆 学习总览      [学霸]   │   │
│ │ 已经完成一半了，继续加油！ │   │
│ │ ───────────────────────── │   │
│ │ 题库: 1  题目: 50          │   │
│ │ 正确率: 85%  完成: 6%      │   │
│ │ 错题: 2  收藏: 1           │   │
│ └───────────────────────────┘   │
├─────────────────────────────────┤
│ 题库详情              [导出]    │
├─────────────────────────────────┤
│ ┌───────────────────────────┐   │
│ │ 📚 示例题库        [A+]   │   │
│ │ 3/50题                     │   │
│ │ ━━━━━━━ 6%                │   │
│ │ ✓3 ↗85% ❌2 ⭐1          │   │
│ │ 💡 有2道错题，建议复习... │   │
│ └───────────────────────────┘   │
└─────────────────────────────────┘
```

**测试要点**：
- [ ] 总体统计数据准确
- [ ] 成就徽章显示（学霸/优秀/良好/加油）
- [ ] 激励文案显示
- [ ] 题库统计卡片准确
- [ ] 成绩等级标签显示

#### 场景4.2：查看快捷操作
- [ ] 点击题库统计卡片
- [ ] 底部弹出操作菜单：
  ```
  示例题库
  ─────────
  ▶️ 继续刷题
  ❌ 错题练习
  ⭐ 收藏练习
  🎲 随机练习
  🔄 重置进度
  ```

**测试每个选项**：

1. **继续刷题**
   - [ ] 点击「继续刷题」
   - [ ] 跳转到刷题页面（顺序模式）

2. **错题练习**
   - [ ] 返回统计页面
   - [ ] 点击题库卡片 → 「错题练习」
   - [ ] 如果有错题：进入刷题页面，只显示错题
   - [ ] 如果无错题：提示"暂无错题"

3. **收藏练习**
   - [ ] 测试「收藏练习」
   - [ ] 如果有收藏：只显示收藏的题目
   - [ ] 如果无收藏：提示"暂无收藏题目"

4. **随机练习**
   - [ ] 测试「随机练习」
   - [ ] 题目顺序随机打乱

5. **重置进度**
   - [ ] 点击「重置进度」
   - [ ] 看到确认对话框
   - [ ] 点击「取消」→ 不执行
   - [ ] 再次点击「重置进度」→ 点击「重置」
   - [ ] 看到加载指示器
   - [ ] 提示"进度已重置"
   - [ ] 统计数据清零（已答: 0）

#### 场景4.3：下拉刷新
- [ ] 在统计页面下拉
- [ ] 看到刷新指示器
- [ ] 数据重新加载

---

### 阶段5：设置页面（2-3分钟）

#### 场景5.1：查看设置页面
- [ ] 点击底部「设置」Tab
- [ ] 看到设置页面

**预期界面**：
```
┌─────────────────────────────────┐
│ 设置                            │
├─────────────────────────────────┤
│ 外观设置                         │
│ ┌───────────────────────────┐   │
│ │ 🌙 深色模式        [OFF]  │   │
│ │ 当前为浅色模式             │   │
│ └───────────────────────────┘   │
│                                  │
│ 数据管理                         │
│ ┌───────────────────────────┐   │
│ │ 🧹 清除缓存           →   │   │
│ └───────────────────────────┘   │
│ ┌───────────────────────────┐   │
│ │ 🔄 重置所有进度       →   │   │
│ └───────────────────────────┘   │
│ ┌───────────────────────────┐   │
│ │ 🗑️ 删除所有数据       →   │   │
│ └───────────────────────────┘   │
│                                  │
│ 关于                             │
│ ┌───────────────────────────┐   │
│ │ ℹ️ 版本信息           →   │   │
│ │ v1.0.0 (1)                 │   │
│ └───────────────────────────┘   │
│ ┌───────────────────────────┐   │
│ │ 🎓 关于驾考刷刷       →   │   │
│ └───────────────────────────┘   │
└─────────────────────────────────┘
```

#### 场景5.2：测试各项功能

1. **深色模式开关**
   - [ ] 点击开关
   - [ ] 提示"深色模式功能开发中..."

2. **清除缓存**
   - [ ] 点击「清除缓存」
   - [ ] 看到确认对话框
   - [ ] 点击「清除」
   - [ ] 提示"缓存已清除"

3. **重置所有进度**（⚠️ 谨慎测试）
   - [ ] 点击「重置所有进度」
   - [ ] 看到警告对话框（橙色）
   - [ ] 说明：清除答题记录，保留错题和收藏
   - [ ] 点击「取消」测试
   - [ ] 如果要测试重置：
     - 点击「重置」
     - 看到加载指示器
     - 提示"所有进度已重置"
     - 返回题库页面确认数据清零

4. **删除所有数据**（⚠️ 危险操作！）
   - [ ] 点击「删除所有数据」
   - [ ] 看到危险警告对话框（红色）
   - [ ] 详细说明后果
   - [ ] 点击「删除」
   - [ ] 看到二次确认对话框
   - [ ] **建议点击「取消」，不要实际删除**
   - [ ] 如果误删，重新下载题库即可

5. **版本信息**
   - [ ] 点击「版本信息」
   - [ ] 看到详细版本信息对话框
   - [ ] 显示应用名称、包名、版本号、构建号

6. **关于应用**
   - [ ] 点击「关于驾考刷刷」
   - [ ] 看到关于对话框
   - [ ] 显示应用图标、版本、介绍

7. **反馈与建议**
   - [ ] 点击「反馈与建议」
   - [ ] 提示"反馈功能开发中..."

---

### 阶段6：综合测试（5-10分钟）

#### 场景6.1：完整学习流程
1. [ ] 下载第二个题库（中国驾照科目一）
2. [ ] 切换到「我的题库」，看到2个题库
3. [ ] 开始刷第二个题库
4. [ ] 答5-10题
5. [ ] 收藏2-3题
6. [ ] 故意答错1-2题
7. [ ] 返回统计页面
8. [ ] 查看两个题库的统计数据
9. [ ] 测试错题练习
10. [ ] 测试收藏练习

#### 场景6.2：导航切换测试
- [ ] 在题库页 → 刷题 → 返回
- [ ] 切换到统计页 → 查看数据
- [ ] 切换到设置页 → 查看设置
- [ ] 切换回题库页 → 确认状态保持

#### 场景6.3：数据持久化测试
1. [ ] 答几道题
2. [ ] 完全关闭应用（杀进程）
3. [ ] 重新启动应用
4. [ ] 检查数据是否保存：
   - [ ] 题库还在
   - [ ] 答题记录保留
   - [ ] 统计数据准确
   - [ ] 收藏和错题保留

---

## ⚠️ 常见问题排查

### 问题1：API连接失败
**现象**：题库商店显示"连接失败"

**解决方案**：
1. 检查后端是否运行：
   ```bash
   curl http://localhost:8080/api/health
   ```
2. 如果返回连接错误，重启后端
3. 如果是iOS模拟器，检查网络权限

### 问题2：下载一直0%
**现象**：点击下载后进度条不动

**解决方案**：
1. 检查后端日志，看是否有请求
2. 检查网络连接
3. 重启应用重试

### 问题3：数据不显示
**现象**：统计页面数据为空或不准确

**解决方案**：
1. 下拉刷新
2. 点击刷新按钮
3. 重启应用

### 问题4：应用崩溃
**现象**：应用闪退

**解决方案**：
1. 查看终端错误日志
2. 运行 `flutter clean`
3. 重新 `flutter pub get`
4. 重新运行

### 问题5：代码生成错误
**现象**：编译错误，找不到`.g.dart`文件

**解决方案**：
```bash
cd mobile
flutter pub run build_runner build --delete-conflicting-outputs
```

---

## ✅ 测试完成检查清单

### 基础功能（必测）
- [ ] 下载题库
- [ ] 刷题（选择、提交、查看解析）
- [ ] 上一题/下一题
- [ ] 收藏题目
- [ ] 答题卡跳题
- [ ] 查看统计
- [ ] 底部导航切换

### 进阶功能（建议测试）
- [ ] 错题练习
- [ ] 收藏练习
- [ ] 随机练习
- [ ] 重置进度
- [ ] 清除缓存
- [ ] 删除题库
- [ ] 数据持久化

### 体验测试（可选）
- [ ] 下拉刷新流畅
- [ ] 页面切换顺滑
- [ ] 动画效果自然
- [ ] 错误提示友好
- [ ] 加载状态明确

---

## 🎯 测试结果记录

### 发现的问题
```
1. [问题描述]
   - 复现步骤：
   - 预期行为：
   - 实际行为：

2. [问题描述]
   ...
```

### 改进建议
```
1. [建议描述]
2. [建议描述]
...
```

---

## 📝 测试总结

测试完成后，你应该能够：
- ✅ 成功下载题库
- ✅ 流畅答题
- ✅ 查看统计数据
- ✅ 管理学习进度
- ✅ 使用各种练习模式

**预计测试时间**：20-30分钟

**测试完成**：恭喜！应用功能正常 🎉

---

**创建时间**: 2026-01-23  
**适用版本**: v1.0.0  
**测试类型**: 功能测试
